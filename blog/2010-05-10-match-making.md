---
title: コンカツの数学
tags:
  - smalltalk
hide_table_of_contents: true
---

モテモテで我が世の春を謳歌していたあなたは、いよいよ真剣に結婚を考えることにしました。しかし焦って貧乏くじを引きたくない！できるだけいい条件の人と結婚したい！\
あなたは勝負はこの1年と決めて、ある結婚相談所に登録することにしました。そこはかなり値段が張るだけはあって「今後1年で100人のお相手の紹介を保証」とのこと。ただし...

- (1) 前もって相手のプロフィールなどは見せられない（条件などは会うまで分からない）
- (2) 1度に1人しか会えない
- (3) 交際を断った場合に次の人を紹介する
- (4) 一度断った相手とは二度と会えない（キープは不可）
- (5) こちらが OK すれば相手は必ず応じる。そしてゴールイン！

という条件付きです。\
この人だ！と思ってももしかしたら次にもっといい人が現れるかも...でもそうこうしているうちに1番の人を見逃してしまっているかも...これは綿密なる戦略が必要だ！

そこであなたは先ず勇気を出して最初の何人かを見逃して（観察して）、その後「これまでに見逃した人より高条件の人」が現れたら問答無用でその人をゲットする、という戦略を採用することにしました。

この戦略だと、見逃す人数が少なすぎると、高条件の人を見逃す確率は減るけども低条件の人を選んでしまう確率も増える。見逃す人が多すぎると、最高条件の人を見逃してしまうかもしれない...では何人を見逃すことで最高の相手をゲットする確率が一番高くなるでしょうか？

結論を先に言うと、最初の37人を見逃すのが最良の戦略で、その場合最高の相手をゲットする確率は約37.1%となります。

ここから先は数学の話

$N$ 人の見合い相手（今の例では $N=100$）のうち、見逃す人数を $s(0\leq s< N)$ とする。\
本当の No.1 の相手が $j(j=1,2,\cdots,N)$ 番目にいる場合で、しかもその人を選ぶ確率を $P_{j}$ と書くとしよう。\
$P_{j}$を考えてみよう。これは

**（j 番目に最高の相手がいる確率）×（そこに達する確率）**

と定義される。\
前者の確率は $1/N$ となる（完全にデタラメなので[一様分布](/docs/gallery-of-distributions/uniform-distribution-discrete)）。\
後者の確率は、運命の j 番目の相手に至るまでに出会う（j-1）人のうちの最高の人が、最初の s 人に含まれていればいいというのは分かるだろうか？ もし（j-1）人のうちの最高の人が最初の s 人に含まれていなければその人に出会った時点で婚活は終了し、運命の人には出会えないことになるからである。 逆にこの人が最初の s 人に含まれていれば、観察期間が終了して運命の j 番目の相手に出会うまでは見逃した人より高条件の人には出会わないことになる。 というわけで、後者の確率は $s/(j-1)$") である。結局 $P_{j}$ は、

$$
P_{j}=\frac{1}{N}\times\frac{s}{j-1};(j=s+1,;s+2,;\cdots;N)
$$

となる（j が 1 から s までの場合は最高の人を見逃してしまった！ということで出逢う確率は 0）。\
最高の相手に出会う確率は $P_{j}$ の和、つまり

$$
P=\sum_{j=s+1}^{N}P_{j}=\frac{s}{N}\sum_{j=s+1}^{N}\frac{1}{j-1}
$$

となる。あとはこれを最大にする $s$ を見つければよいことになる！

ちなみにこの 37% という何ともキレの悪い数字は一体何かというと、

$$
\frac{1}{\text{e}}=0.367879\cdots
$$

です。何とこんなところに**自然対数の底** $\text{e}=2.71828\cdots$ が！！
